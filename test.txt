import shap
import matplotlib.pyplot as plt
import numpy as np

# Compute SHAP values
explainer = shap.TreeExplainer(model)
shap_values = explainer.shap_values(X)

# Create SHAP bar plot (no show)
plt.figure()
shap.summary_plot(
    shap_values,
    X,
    plot_type="bar",
    show=False
)

# Get current axes
ax = plt.gca()

# Add labels to bars
for bar in ax.patches:
    width = bar.get_width()
    ax.text(
        width,
        bar.get_y() + bar.get_height() / 2,
        f"{width:.3f}",
        va="center",
        ha="left",
        fontsize=9
    )

plt.show()
